(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[5984],{5984:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(7294),n=r(8672),c=r(5186),l=r(5415),o=r(2043),s=r(4538),i=r(3025),u=r(8004);r(2031);const m=[{c:"rgba(0, 0, 250, 0.7)",i:r.p+"35f98571579c799828e73f3e7cfc5634.igc"},{c:"rgba(0, 50, 200, 0.7)",i:r.p+"08d341a63428255a9f42d1dad7e19df5.igc"},{c:"rgba(0, 100, 150, 0.7)",i:r.p+"6634c672e2855bfb2def3ad33d01b0e4.igc"},{c:"rgba(0, 150, 200, 0.7)",i:r.p+"dbecb26a49a66da3c0a27ee0ad994925.igc"},{c:"rgba(0, 200, 50, 0.7)",i:r.p+"5f9b60a43fcd910126e0dff92120e4d7.igc"}],d=(0,n.mi)([6,45.7]);function g(){const[e,t]=a.useState(""),[r,n]=a.useState(null),[g,f]=a.useState(null),[p,h]=a.useState(0),[b,E]=a.useState([]),[C,y]=a.useState({start:1/0,stop:-1/0,duration:0}),[P,w]=a.useState((()=>(Promise.all(m.map((e=>fetch(e.i).then((e=>e.text()))))).then((e=>w(e))),[]))),S={redCircle:(0,u.yO)(),blueCircle:(0,u.yO)(),flightPath:a.useRef([])},k=a.useRef(),x=a.useRef();return a.createElement(a.Fragment,null,a.useMemo((()=>m.map(((e,t)=>a.createElement(u.P_,{key:t,ref:e=>S.flightPath.current[t]=e},a.createElement(u.c5,{color:e.c,width:3}))))),[S.flightPath]),a.createElement(u.P_,{ref:S.redCircle},a.createElement(u.c5,{color:"red",width:1}),a.createElement(u.Au,{radius:6},a.createElement(u.X3,{color:"red"}))),a.createElement(u.P_,{ref:S.blueCircle},a.createElement(u.Au,{radius:6},a.createElement(u.X3,{color:"blue"}))),a.createElement(i.rO,{className:"example-map",center:d,zoom:9,onPointerMove:(0,a.useCallback)((e=>{const r=k.current.source.getClosestFeatureToCoordinate(e.coordinate),a=r.getGeometry().getClosestPoint(e.coordinate),c=new Date(1e3*a[2]);n(new o.Z(a)),f(new s.Z([e.coordinate,[a[0],a[1]]])),t("<strong>"+r.get("PLT")+"</strong><br><em>"+c.toUTCString()+"</em>"),e.map.render()}),[k])},a.createElement(i.zV,{zIndex:5,url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",attributions:"Kartendaten: © OpenStreetMap-Mitwirkende, SRTM | Kartendarstellung: © OpenTopoMap (CC-BY-SA)"}),a.createElement(i.jh,{zIndex:10,ref:k,onAddFeature:(0,a.useCallback)((e=>{const t=e.feature.getGeometry();C.start=Math.min(C.start,t.getFirstCoordinate()[2]),C.stop=Math.max(C.stop,t.getLastCoordinate()[2]),C.duration=C.stop-C.start,y({...C})}),[C]),onPostRender:(0,a.useCallback)((e=>{const t=(0,l.u3)(e);t.setStyle(u.P_.getStyleStatic(S.redCircle)),r&&g&&(t.drawGeometry(r),t.drawGeometry(g))}),[r,g,S.redCircle])},a.useMemo((()=>a.createElement(a.Fragment,null,P.map(((e,t)=>a.createElement(i.j$,{key:t,feature:(new c.Z).readFeatures(e,{featureProjection:"EPSG:3857"})[0],style:S.flightPath.current[t]}))))),[P,S.flightPath,S.flightPath.current[0]])),a.createElement(i.jh,{zIndex:10,ref:x,style:S.blueCircle},a.useMemo((()=>a.createElement(a.Fragment,null,b.map(((e,t)=>a.createElement(i.j$,{key:t,geometry:new o.Z(e)}))))),[b]))),a.createElement("div",{className:"d-flex flex-row mb-3 align-items-center"},a.createElement("div",{className:"jumbotron py-1 px-3 m-0 mr-3 w-50",dangerouslySetInnerHTML:{__html:e}}),a.createElement("div",{className:"w-50"},a.createElement("input",{type:"range",className:"range-slider range-slider--primary w-100",min:"0",max:"100",value:p,onChange:(0,a.useCallback)((function(e){const t=parseInt(e.currentTarget.value);h(t);const r=k.current.source,a=C.start+C.duration*t/100,n=[];r.forEachFeature((e=>{if(!e.get("PLT"))return;const t=e.getGeometry().getCoordinateAtM(a,!0);n.push(t)})),E(n),this.context.map.render()}),[k,C])}))))}}}]);