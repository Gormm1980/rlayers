"use strict";(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[5146],{5146:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(7294),r=n(6414),a=n(188),o=n(785),s=(n(2031),n(692)),u=n(8004);function m(e){if(null===e)return Promise.resolve("");const t=(0,r.vs)(e.getCoordinates(),"EPSG:3857","EPSG:4326"),n=`https://nominatim.openstreetmap.org/reverse?format=json&lon=${t[0]}&lat=${t[1]}`;return fetch(n).then((e=>e.json())).then((e=>e.display_name)).catch((e=>e.message))}const c=new o.ZP;function i(){const[e,t]=l.useState(null),[n,o]=l.useState(null);let i;!function(e){e[e.START=0]="START",e[e.FINISH=1]="FINISH"}(i||(i={}));const[E,S]=l.useState(i.START),[f,g]=l.useState(""),[h,d]=l.useState(""),[p,T]=l.useState(null);return l.useEffect((()=>{m(e).then((e=>g(e)))}),[e]),l.useEffect((()=>{m(n).then((e=>d(e)))}),[n]),l.useEffect((()=>{(function(e,t){if(null===e||null===t)return Promise.resolve(null);const n=(0,r.vs)(e.getCoordinates(),"EPSG:3857","EPSG:4326"),l=(0,r.vs)(t.getCoordinates(),"EPSG:3857","EPSG:4326"),a=`https://router.project-osrm.org/route/v1/driving/${n[0]},${n[1]};${l[0]},${l[1]}`;return fetch(a).then((e=>e.json())).then((e=>function(e){if(e&&e.length>0){const t=c.readFeature(e[0].geometry);return t.getGeometry().transform("EPSG:4326","EPSG:3857"),t.getGeometry()}return null}(e.routes)))})(e,n).then((e=>T(e)))}),[e,n]),l.createElement(l.Fragment,null,l.createElement(s.rO,{className:"example-map",initial:{center:(0,r.mi)([2.364,48.82]),zoom:11},onClick:e=>{const n=e.map.getCoordinateFromPixel(e.pixel);E===i.START?(o(null),t(new a.Z(n)),S(i.FINISH)):(o(new a.Z(n)),S(i.START))}},l.createElement(s.H3,null),l.createElement(s.jh,null,l.createElement(u.P_,null,l.createElement(u.Au,{radius:6},l.createElement(u.X3,{color:"blue"}))),l.createElement(s.j$,{key:0,geometry:e}),l.createElement(s.j$,{key:1,geometry:n}),l.createElement(s.j$,{key:2,geometry:p},l.createElement(u.P_,null,l.createElement(u.c5,{width:3,color:"darkgreen"}))))),l.createElement("div",{className:"mx-0 mt-0 mb-3 p-1 w-100 jumbotron shadow shadow"},l.createElement("p",null,l.createElement("strong",null,"Select ",E===i.START?"START":"FINISH"," point")),l.createElement("div",{className:"d-flex mt-2 justify-content-between"},0==f.length?null:l.createElement("div",null,l.createElement("strong",null,"From: "),l.createElement("em",null,f)),0==h.length?null:l.createElement("div",null,l.createElement("strong",null,"To: "),l.createElement("em",null,h)))))}}}]);