"use strict";(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[5146],{5146:(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var l=n(7294),r=n(6414),a=n(188),o=n(785),u=(n(2031),n(4897)),c=n(8004);function s(e){const t=(0,r.vs)(e,"EPSG:3857","EPSG:4326"),n=`https://nominatim.openstreetmap.org/reverse?format=json&lon=${t[0]}&lat=${t[1]}`;return fetch(n).then((e=>e.json())).then((e=>e.display_name)).catch((e=>e.message))}const m=new o.ZP;function E(){const[e,t]=l.useState(null),[n,o]=l.useState(null);let E;!function(e){e[e.START=0]="START",e[e.FINISH=1]="FINISH"}(E||(E={}));const[i,S]=l.useState(E.START),[g,h]=l.useState(""),[f,d]=l.useState(""),[p,T]=l.useState(null);return l.useEffect((()=>{null!==e?s(e.getCoordinates()).then((e=>h(e))):h("")}),[e]),l.useEffect((()=>{null!==n?s(n.getCoordinates()).then((e=>d(e))):d("")}),[n]),l.useEffect((()=>{null!==e&&null!==n?function(e,t){const n=(0,r.vs)(e.getCoordinates(),"EPSG:3857","EPSG:4326"),l=(0,r.vs)(t.getCoordinates(),"EPSG:3857","EPSG:4326"),a=`https://router.project-osrm.org/route/v1/driving/${n[0]},${n[1]};${l[0]},${l[1]}`;return fetch(a).then((e=>e.json())).then((e=>function(e){if(e.length>0){const t=m.readFeature(e[0].geometry);return t.getGeometry().transform("EPSG:4326","EPSG:3857"),t.getGeometry()}return null}(e.routes)))}(e,n).then((e=>T(e))):T(null)}),[e,n]),l.createElement(l.Fragment,null,l.createElement(u.rO,{className:"example-map",initial:{center:(0,r.mi)([2.364,48.82]),zoom:11},onClick:e=>{const n=e.map.getCoordinateFromPixel(e.pixel);i===E.START?(o(null),t(new a.Z(n)),S(E.FINISH)):(o(new a.Z(n)),S(E.START))}},l.createElement(u.H3,null),l.createElement(u.jh,null,l.createElement(c.P_,null,l.createElement(c.Au,{radius:6},l.createElement(c.X3,{color:"blue"}))),l.createElement(u.j$,{key:0,geometry:e}),l.createElement(u.j$,{key:1,geometry:n})),l.createElement(u.jh,null,l.createElement(c.P_,null,l.createElement(c.c5,{width:2,color:"green"})),l.createElement(u.j$,{geometry:p}))),l.createElement("div",{className:"mx-0 mt-0 mb-3 p-1 w-100 jumbotron shadow shadow"},l.createElement("p",null,l.createElement("strong",null,"Select ",i===E.START?"START":"FINISH"," point")),l.createElement("div",{className:"d-flex mt-2 justify-content-between"},0==g.length?null:l.createElement("div",null,l.createElement("strong",null,"From: "),l.createElement("em",null,g)),0==f.length?null:l.createElement("div",null,l.createElement("strong",null,"To: "),l.createElement("em",null,f)))))}}}]);