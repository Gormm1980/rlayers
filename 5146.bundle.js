"use strict";(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[5146],{5146:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(7294),r=n(6414),a=n(188),o=n(1090),m=n(785),s=(n(2031),n(4897)),u=n(8004);function c(e){const t=(0,r.vs)(e,"EPSG:3857","EPSG:4326"),n=`http://nominatim.openstreetmap.org/reverse?format=json&lon=${t[0]}&lat=${t[1]}`;return fetch(n).then((e=>e.json())).then((e=>e.display_name))}const E=new m.ZP;function i(){const[e]=l.useState(new o.Z),[t]=l.useState(new o.Z);let n;!function(e){e[e.START=0]="START",e[e.FINISH=1]="FINISH"}(n||(n={}));const[m,i]=l.useState(n.START),[S,h]=l.useState(""),[g,d]=l.useState(""),[f]=l.useState(new o.Z);return l.createElement(l.Fragment,null,l.createElement(s.rO,{className:"example-map",initial:{center:(0,r.mi)([2.364,48.82]),zoom:11},onClick:l=>{const o=l.map.getCoordinateFromPixel(l.pixel);m===n.START?(e.setGeometry(new a.Z(o)),i(n.FINISH),c(o).then((e=>h(e))),f.setGeometry(null),d(""),t.setGeometry(null)):(t.setGeometry(new a.Z(o)),i(n.START),c(o).then((e=>d(e))),function(e,t){const n=(0,r.vs)(e.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326"),l=(0,r.vs)(t.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326"),a=`https://router.project-osrm.org/route/v1/driving/${n[0]},${n[1]};${l[0]},${l[1]}`;return fetch(a).then((e=>e.json())).then((e=>function(e){if(e.length>0){const t=E.readFeature(e[0].geometry);return t.getGeometry().transform("EPSG:4326","EPSG:3857"),t.getGeometry()}return null}(e.routes)))}(e,t).then((e=>f.setGeometry(e))))}},l.createElement(s.H3,null),l.createElement(s.jh,null,l.createElement(u.P_,null,l.createElement(u.Au,{radius:6},l.createElement(u.X3,{color:"blue"}))),l.createElement(s.j$,{key:0,feature:e}),l.createElement(s.j$,{key:1,feature:t})),l.createElement(s.jh,null,l.createElement(u.P_,null,l.createElement(u.c5,{width:2,color:"green"})),l.createElement(s.j$,{feature:f}))),l.createElement("div",{className:"mx-0 mt-0 mb-3 p-1 w-100 jumbotron shadow shadow"},l.createElement("p",null,l.createElement("strong",null,"Select ",m===n.START?"START":"FINISH"," point")),l.createElement("div",{className:"d-flex mt-2"},0==S.length?null:l.createElement("div",null,l.createElement("strong",null,"From: "),l.createElement("em",null,S)),0==g.length?null:l.createElement("div",null,l.createElement("strong",null,"To: "),l.createElement("em",null,g)))))}}}]);